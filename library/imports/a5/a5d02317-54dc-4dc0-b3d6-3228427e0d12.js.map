{"version":3,"sources":["assets/script/MainScene.js"],"names":["TAG","CurLevel","LevelDataList","title","a1","a2","a3","a4","answerIndex","redTex","cc","loader","loadRes","err","tex","greenTex","yellowTex","Class","Component","properties","mask","type","Mask","tooltip","moneyLabel","Label","progressBar1","Sprite","progressBar1Front","progressBar1After","hintSprite","passLabel","progressBar2","progressBar2Front","progressBar2After","star1","star2","star3","nextBtn","Button","titleSprite","titleLabel","answerBtn1","btnBackground1","btn1Label","answerBtn2","btnBackground2","btn2Label","answerBtn3","btnBackground3","btn3Label","answerBtn4","btnBackground4","btn4Label","scrapteRadiusX","Float","scrapteRadiusY","scrapteArea","scrapeEvents","EventHandler","onLoad","self","node","on","onNextBtn","onAnswerBtn1","onAnswerBtn2","onAnswerBtn3","onAnswerBtn4","Node","EventType","TOUCH_START","onTouchBegin","TOUCH_MOVE","onTouchMove","TOUCH_END","onTouchEnd","TOUCH_CANCEL","onTouchCancel","getInitNum","pixelNum","achieveNum","initPixel","scrapeNode","children","log","length","x","width","y","height","console","widthWide","heightWide","zx","zy","dx","dy","dy1","pixelPoint","rx","ry","p","isTouch","push","updateData","string","levelData","active","spriteFrame","SpriteFrame","fillRange","graphics","_graphics","clear","start","data","json","endScape","off","onDestroy","handleRight","handleError","index","event","comFunc","checkScrape","getPos","e","point","touch","getLocation","convertToNodeSpaceAR","checkPixelPoint","_addCircle","i","Math","abs","color","lineWidth","fillColor","ellipse","fill","achieveScrape","runAction","fadeOut","scheduleOnce","emitEvents","Event","EventCustom","bind"],"mappings":"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","sourceRoot":"/","sourcesContent":["const TAG = \"MainScene\";\nvar CurLevel = 1;\nvar LevelDataList = [\n    {\n        title: \"这是什么物品\",\n        a1: \"车子\",\n        a2: \"房子\",\n        a3: \"椅子\",\n        a4: \"瓶子\",\n    },\n    {\n        title: \"图中是什么图形\",\n        a1: \"圆形\",\n        a2: \"矩形\",\n        a3: \"正方形\",\n        a4: \"椭圆形\",\n    },\n];\nvar answerIndex = 1;\nlet redTex = null;\ncc.loader.loadRes(\"image/red\", function(err, tex){\n    if (err == null){\n        redTex = tex;\n    }\n});\nlet greenTex = null;\ncc.loader.loadRes(\"image/green\", function(err, tex){\n    if (err == null){\n        greenTex = tex;\n    }\n});\nlet yellowTex = null;\ncc.loader.loadRes(\"image/yellow\", function(err, tex){\n    if (err == null){\n        yellowTex = tex;\n    }\n});\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        mask: {\n            default: null,\n            type: cc.Mask,\n            tooltip: \"需要刮开的\",\n        },\n        moneyLabel:{\n            default: null,\n            type: cc.Label,\n        },\n        progressBar1: {\n            default: null,\n            type: cc.Sprite,\n        },\n        progressBar1Front: {\n            default: null,\n            type: cc.Sprite,\n        },\n        progressBar1After: {\n            default: null,\n            type: cc.Sprite,\n        },\n        hintSprite: {\n            default: null,\n            type: cc.Sprite,\n        },\n        passLabel: {\n            default: null,\n            type: cc.Label,\n        },\n        progressBar2: {\n            default: null,\n            type: cc.Sprite,\n        },\n        progressBar2Front: {\n            default: null,\n            type: cc.Sprite,\n        },\n        progressBar2After: {\n            default: null,\n            type: cc.Sprite,\n        },\n        star1: {\n            default: null,\n            type: cc.Sprite,\n        },\n        star2: {\n            default: null,\n            type: cc.Sprite,\n        },\n        star3: {\n            default: null,\n            type: cc.Sprite,\n        },\n        nextBtn: {\n            default: null,\n            type: cc.Button,\n        },    \n        titleSprite: {\n            default: null,\n            type: cc.Sprite,\n        },\n        titleLabel: {\n            default: null,\n            type: cc.Label,\n        }, \n        answerBtn1: {\n            default: null,\n            type: cc.Button,\n        },\n        btnBackground1:{\n            default: null,\n            type: cc.Sprite,\n        },\n        btn1Label: {\n            default: null,\n            type: cc.Label,\n        },\n        answerBtn2: {\n            default: null,\n            type: cc.Button,\n        },\n        btnBackground2:{\n            default: null,\n            type: cc.Sprite,\n        },\n        btn2Label: {\n            default: null,\n            type: cc.Label,\n        },\n        answerBtn3: {\n            default: null,\n            type: cc.Button,\n        },\n        btnBackground3:{\n            default: null,\n            type: cc.Sprite,\n        },\n        btn3Label: {\n            default: null,\n            type: cc.Label,\n        },\n        answerBtn4: {\n            default: null,\n            type: cc.Button,\n        },\n        btnBackground4:{\n            default: null,\n            type: cc.Sprite,\n        },\n        btn4Label: {\n            default: null,\n            type: cc.Label,\n        },\n        scrapteRadiusX: {\n            default: 20.0,\n            type: cc.Float,\n            tooltip: \"绘制点图形的x轴半径\"\n        },\n        scrapteRadiusY: {\n            default: 22.0,\n            type: cc.Float,\n            tooltip: \"绘制点图形的y轴半径\"\n        },\n        scrapteArea:{\n            default: 0.5,\n            type: cc.Float,\n            tooltip: \"需要刮开的图层面积的多少\"\n        },\n        scrapeEvents:{\n            default: [],\n            type: [cc.Component.EventHandler],\n            tooltip: \"擦除完成出发事件\"\n        },\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        var self =  this;\n        this.nextBtn.node.on(\"click\", this.onNextBtn, this);\n        this.answerBtn1.node.on(\"click\", this.onAnswerBtn1, this);\n        this.answerBtn2.node.on(\"click\", this.onAnswerBtn2, this);\n        this.answerBtn3.node.on(\"click\", this.onAnswerBtn3, this);\n        this.answerBtn4.node.on(\"click\", this.onAnswerBtn4, this);\n\n        //this.getInitNum();\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onTouchBegin, this);\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\n        this.node.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchCancel, this);\n    },\n    getInitNum(){\n        this.pixelNum = 0;\n        this.achieveNum = this.scrapteArea * this.initPixel();\n    },\n    initPixel(){\n        this.scrapeNode = this.mask.node.children[0];\n        cc.log(\"this.scrapeNode \", this.mask.node.children.length);\n        var x = this.scrapeNode.width, y = this.scrapeNode.height;\n        console.log(\"x=\", x, \"y=\", y);\n        this.node.width = x;\n        this.node.height = y;\n        this.widthWide= x/2 + 20;\n        this.heightWide = x/2 + 20;\n        var zx = x/2, zy=y/2, dx = -zx, dy = -zy, dy1 = dy;\n        var pixelPoint = [];\n        var rx = this.scrapteRadiusX*2;\n        var ry = this.scrapteRadiusY*2;\n\n        for(; dx <= zx; dx += rx)\n        {\n            for(dy = dy1; dy <= zy; dy += ry)\n            {\n                var p = [dx, dy];\n                p.isTouch = true;\n                pixelPoint.push(p);\n            }\n        }\n        this.pixelPoint = pixelPoint;\n        return pixelPoint.length;\n    },\n    updateData()\n    {\n        this.passLabel.string = \"第\" + CurLevel + \"关\";\n        var levelData = LevelDataList[CurLevel-1];\n        this.btn1Label.string = levelData.a1;\n        this.btn2Label.string = levelData.a2;\n        this.btn3Label.string = levelData.a3;\n        this.btn4Label.string = levelData.a4;\n        this.titleLabel.string = levelData.title;\n\n        this.titleSprite.node.active = true;\n        this.nextBtn.node.active = false;\n        this.btnBackground1.spriteFrame = new cc.SpriteFrame(yellowTex);\n        this.btnBackground2.spriteFrame = new cc.SpriteFrame(yellowTex);\n        this.btnBackground3.spriteFrame = new cc.SpriteFrame(yellowTex);\n        this.btnBackground4.spriteFrame = new cc.SpriteFrame(yellowTex);\n        this.getInitNum();\n\n        this.progressBar2.fillRange = 1;\n        this.progressBar2After.node.active = true;\n        this.progressBar2Front.node.active = true;\n        this.star1.node.active = true;\n        this.star2.node.active = true;\n        this.star3.node.active = true;\n        var graphics = this.mask._graphics;\n        graphics.clear();\n    },\n    start () {\n        this.moneyLabel.string = 0;\n        this.progressBar1.fillRange = 0;\n        this.progressBar1Front.node.active = false;\n        this.progressBar1After.node.active = false;\n        this.progressBar2.fillRange = 1;\n        this.nextBtn.node.active = false;\n        cc.loader.loadRes(\"config/level\", function(err, data){\n            console.log(err, data)\n            if (err == null){\n                levelData = data.json;\n            }\n        });\n        this.updateData();\n    },\n    endScape()\n    {\n        this.node.off(cc.Node.EventType.TOUCH_START, this.onTouchBegin, this);\n        this.node.off(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\n        this.node.off(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\n        this.node.off(cc.Node.EventType.TOUCH_CANCEL, this.onTouchCancel, this);\n    },\n    // update (dt) {},\n    onDestroy: function()\n    {\n        this.endScape();\n    },\n    onNextBtn: function(){\n        console.log(\"onNextBtn \", CurLevel, LevelDataList.length);\n        CurLevel++;\n        if (CurLevel > LevelDataList.length)\n        {\n            console.log(\"题目做完了\");\n            return;\n        }\n        this.updateData();\n    },\n    onAnswerBtn1: function(){\n        cc.log(\"onAnswerBtn1\");\n        if (answerIndex == 1)\n        {\n            this.handleRight(1);\n        }\n        else\n        {\n            this.handleError(1);\n        }\n    },\n    onAnswerBtn2: function(){\n        cc.log(\"onAnswerBtn2\");\n        if (answerIndex == 2)\n        {\n            this.handleRight(2);\n        }\n        else\n        {\n            this.handleError(2);\n        }\n    },\n    onAnswerBtn3: function(){\n        cc.log(\"onAnswerBtn3\");\n        if (answerIndex == 3)\n        {\n            this.handleRight(3);\n        }\n        else\n        {\n            this.handleError(3);\n        }\n    },\n    onAnswerBtn4: function(){\n        cc.log(\"onAnswerBtn4\");\n        if (answerIndex == 4)\n        {\n            this.handleRight(4);\n        }\n        else\n        {\n            this.handleError(4);\n        }\n    },\n    handleRight(index){\n        this.progressBar1.fillRange += 0.1;\n        this.nextBtn.node.active = true;\n        this.titleSprite.node.active = false;\n        if (1 == index){\n            this.btnBackground1.spriteFrame = new cc.SpriteFrame(greenTex);\n        }else if(2 == index){\n            this.btnBackground2.spriteFrame = new cc.SpriteFrame(greenTex);\n        }else if(3 == index){\n            this.btnBackground3.spriteFrame = new cc.SpriteFrame(greenTex);\n        }else if(4 == index){\n            this.btnBackground4.spriteFrame = new cc.SpriteFrame(greenTex);\n        }\n    },\n    handleError(index){\n        this.nextBtn.node.active = true;\n        this.titleSprite.node.active = false;\n        if (1 == index){\n            this.btnBackground1.spriteFrame = new cc.SpriteFrame(redTex);\n        }else if(2 == index){\n            this.btnBackground2.spriteFrame = new cc.SpriteFrame(redTex);\n        }else if(3 == index){\n            this.btnBackground3.spriteFrame = new cc.SpriteFrame(redTex);\n        }else if(4 == index){\n            this.btnBackground4.spriteFrame = new cc.SpriteFrame(redTex);\n        }\n    },\n    onTouchBegin: function(event){\n        cc.log(\"touch begin\");\n        //this.comFunc(event);\n    },\n    onTouchMove: function(event){\n        cc.log(\"touch move\");\n        this.comFunc(event);\n    },\n    onTouchEnd: function(event){\n        cc.log(\"touch end\");\n        this.checkScrape();\n        this.comFunc(event);\n    },\n    onTouchCancel: function(event){\n        cc.log(\"touch cancel\");\n        this.checkScrape();\n    },\n    checkScrape(){\n        cc.log(\"目标数是：\" + this.achieveNum);\n        cc.log(\"现在已经刮开\"+this.pixelNum);\n        if (this.achieveNum <= this.pixelNum){\n            cc.log(\"已经刮完图层\");\n            //this.achieveScrape();\n        }\n        console.log(\"使用的比例：\", this.pixelNum/this.achieveNum);\n        this.progressBar2.fillRange = this.progressBar2.fillRange - this.pixelNum/this.achieveNum;\n        if (this.progressBar2.fillRange <= 0.01)\n            this.progressBar2Front.node.active = false;\n        if (this.progressBar2.fillRange <= 0.24){\n            this.star3.node.active = false;\n            this.star2.node.active = false;\n            this.star1.node.active = false;\n        }\n        else if (this.progressBar2.fillRange <= 0.52){\n            this.star2.node.active = false;\n            this.star1.node.active = false;\n        }\n        else if (this.progressBar2.fillRange <= 0.8)\n            this.star1.node.active = false;\n        this.progressBar2After.node.active = false;\n        cc.log(\"this.scrapteRadiusX = \" + this.scrapteRadiusX);\n        cc.log(\"this.scrapteRadiusY = \" + this.scrapteRadiusY);\n    },\n    getPos(e){\n        var point = e.touch.getLocation();\n        point = this.node.convertToNodeSpaceAR(point);\n        return point;\n    },\n    comFunc(event)\n    {\n        var point = this.getPos(event);\n        this.checkPixelPoint(point);\n        this._addCircle(point);\n    },\n    checkPixelPoint(point){\n        var pixelPoint = this.pixelPoint;\n        var x, y;\n        for (var i in pixelPoint){\n            x = Math.abs(point.x - pixelPoint[i][0]);\n            y = Math.abs(point.y - pixelPoint[i][1]);\n            if (x <= this.scrapteRadiusX && y <= this.scrapteRadiusY && pixelPoint[i].isTouch)\n            {\n                pixelPoint[i].isTouch = false;\n                this.pixelNum++;\n                return;\n            }\n        }\n    },\n    _addCircle(point){\n        var graphics = this.mask._graphics;\n        var color = cc.color(0, 0, 0, 255);\n        graphics.lineWidth = 2;\n        graphics.fillColor = color;\n        graphics.ellipse(point.x, point.y, this.scrapteRadiusX, this.scrapteRadiusY);\n        graphics.fill();\n    },\n    achieveScrape(){\n        this.endScape();\n        this.node.runAction(cc.fadeOut(0.5));\n        this.scheduleOnce((()=>{\n            cc.Component.EventHandler.emitEvents(this.scrapeEvents, new cc.Event.EventCustom(\"scrapeEvents\"));\n        }).bind(this), 0.6);\n    },\n});\n"]}